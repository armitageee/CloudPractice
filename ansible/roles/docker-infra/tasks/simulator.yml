---
# tasks file for docker-infra

- docker_host_info:
    images: yes
    containers: yes
  register: docker_objects

- docker_container:
    name: "{{ item.Id }}"
    state: absent
  loop: "{{ docker_objects.containers }}"
  loop_control:
    label: "{{ item.Id }}"

- docker_image:
    name: item.RepoTags | first
    state: absent
    force_absent: yes
  loop: "{{ docker_objects.images }}"
  loop_control:
    label: "{{ item.RepoTags | first }}"
    
- name: docker-compose up on client
  docker_compose:
    project_src: "{{docker_src_simulator}}"